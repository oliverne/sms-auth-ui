(()=>{"use strict";const t={main:"_25mVTNWZnPU1m_d6PN9GuN",header:"_3Y8p8ivdc1LgdLeCZYJntg",title:"_1T0J5WReULLmqY1bFiv-Fp",desc:"sgbrykgaZOqZIiqrLbQYM",form:"_1_9PCVfb5B54sKFsvvuKZr",iconQuestion:"_1kcUG1-mQvQJx91ZVrARbI",notice:"_3qE6DltUDGfDtiPeylZJX-",submit:"_3pPjfA8xXf94oXPfuVehJi",submitButton:"_3FYMC18HB1mRmHNwUWRaoy"},e=`\n  <div class="${t.main}">\n    <header class="${t.header}">\n      <h1 class="${t.title}">입력정보</h1>\n      <h2 class="${t.desc}">본인 명의의 휴대폰 정보를 입력하세요</h2>\n    </header>\n\n    <div class="${t.form}">\n      <custom-select field-index="1" state-key="carrierCode" value="" label="통신사"></custom-select>\n\n      <custom-input field-index="2" state-key="phoneNumber" value="" label="휴대폰 번호" max-length="13"></custom-input>\n      <custom-input field-index="3" state-key="registerNumber" value="" label="주민등록번호" max-length="8"></custom-input>\n      <custom-input field-index="4" state-key="name" value="" label="이름" max-length="10"></custom-input>\n\n      <div class="${t.notice}">\n        <i class="${t.iconQuestion}"></i>\n        <span class=${t.noticeDetail}>\n          모든 정보가 올바르게 입력되었음에도\n          인증번호 요청이 되지 않는 경우 가입하신 통신사에 문의해주세요.\n        </span>\n      </div>\n\n      <terms-box state-key="termsCode" value="[]"></terms-box>\n\n      <div class="${t.submit}">\n        <button type="submit" disabled class="${t.submitButton}">인증번호요청</button>\n      </div>\n    </div>\n  </div>\n`,s=JSON.parse('[{"termsId":"1","title":"본인확인 이용동의","required":true},{"termsId":"2","title":"개인 정보 수집/이용/취급 위탁동의","required":true},{"termsId":"3","title":"고유식별번호 처리 동의","required":true},{"termsId":"4","title":"(선택) 광고성 정보 수신 동의","required":false}]'),i=JSON.parse('[{"code":"SKT","description":"SKT"},{"code":"KT","description":"KT"},{"code":"LGT","description":"LG U+"},{"code":"SKTMVNO","description":"SKT 알뜰폰"},{"code":"KTMVNO","description":"KT 알뜰폰"},{"code":"LGTMVNO","description":"LG U+ 알뜰폰"}]'),n={name:"",registerNumber:"",carrierCode:"",phoneNumber:"",termsCode:[]};class a extends HTMLElement{constructor(){super(),this.handleStateUpdated=t=>{if(!this.submitButton)return;const e=t.target;if(e instanceof HTMLElement){const t="valid"===e.getAttribute("valid"),s=e.getAttribute("field-index")||"-1",i=parseInt(s,10);if(i>0){const e=this.querySelector(`[field-index="${i+1}"]`);if(t&&e){const t=e.querySelector("input");t&&t.focus()}}}this.checkAllStatesValid()?this.submitButton.removeAttribute("disabled"):this.submitButton.setAttribute("disabled","disabled"),this.updateState()},this.handleSubmitOnly=t=>{t.target instanceof HTMLButtonElement&&"submit"===t.target.type.toLocaleLowerCase()&&"disabled"!==t.target.getAttribute("disabled")&&(console.log("Result:",this.state),alert("API 서버에 요청을 할 타이밍입니다. 콘솔 창을 확인하세요."))},this.template=e,this.terms=s,this.carriers=i,this.state=n,this.submitButton=null,this.addEventListener("state-updated",this.handleStateUpdated),this.addEventListener("click",this.handleSubmitOnly)}connectedCallback(){this.render(),this.submitButton=this.querySelector("button[type=submit]")}updateState(){const t=this.querySelectorAll("[state-key]"),e=n;t.forEach((t=>{const s=t.getAttribute("state-key"),i=t.getAttribute("value");s&&(e[s]=i&&/^\[.*\]$/.test(i)?JSON.parse(i):i||"")})),this.state=Object.assign({},e)}checkAllStatesValid(){return Object.keys(this.state).every((t=>{var e;return"valid"===(null===(e=this.querySelector(`[state-key=${t}]`))||void 0===e?void 0:e.getAttribute("valid"))}))}render(){this.innerHTML=this.template;const t=this.querySelector("[state-key=carrierCode]");t&&t.setAttribute("list",JSON.stringify(this.carriers));const e=this.querySelector("[state-key=termsCode]");e&&e.setAttribute("list",JSON.stringify(this.terms))}}a.tag="app-root";const l="_1U0WXwrNT45pA_xI62g-F3",r="SXK-X3RaWYLLHEqQSn58V",c="_2TlPqBntZv0jA10n_UslI8",d="-magD0HgKDMznGcIASkSP";function u(t){if("string"!=typeof t)return[!1,"",""];const e=t.replace(/\D+/g,"");let s=e;if(e.length>3){s=`${e.slice(0,3)} ${e.slice(3)}`}if(e.length>7){s=`${e.slice(0,3)} ${e.slice(3,6)} ${e.slice(6)}`}if(e.length>10){s=`${e.slice(0,3)} ${e.slice(3,7)} ${e.slice(7)}`}const i=s.replace(/\s/g,""),n=i.length;return[n>=10&&n<=11,s,i]}function o(t){const e=t.replace(/\D+/g,"");let s=e;if(e.length>6){s=`${e.slice(0,6)}-${e.slice(6)}`.slice(0,8)}const i=/\d\d\d\d\d\d-\d/.test(s),n=s.replace(/-/g,"");return[i,s,n]}function h(t){const e=t.replace(/[^ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/g,""),s=e;return[/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/g.test(e)&&e.length>=2,e,s]}class m extends HTMLElement{constructor(){super(),this.handleInput=t=>{if(this.input&&t.target instanceof HTMLInputElement){const[e,s,i]=this.validate(t.target.value);this.setAttribute("value",i),this.input.value=s,e?(this.setAttribute("valid","valid"),this.classList.remove(d)):this.removeAttribute("valid"),this.emitUpdate()}},this.handleChange=t=>{t.target instanceof HTMLInputElement&&("valid"!==this.getAttribute("valid")&&this.classList.add(d),this.emitUpdate())};const t=this.getAttribute("state-key")||"__undefined__";this.validate=function(t){switch(t){case"phoneNumber":return u;case"registerNumber":return o;case"name":return h;default:return t=>[!1,t,t]}}(t),this.input=null,this.addEventListener("keyup",this.handleInput),this.addEventListener("change",this.handleChange)}connectedCallback(){this.render(),this.input=this.querySelector("input")}emitUpdate(){this.dispatchEvent(new CustomEvent("state-updated",{bubbles:!0,cancelable:!0}))}render(){const t=this.getAttribute("label")||"",e=this.getAttribute("value")||"",s=this.getAttribute("max-length")||"";this.innerHTML=`\n      <div class="${l}">\n        <label class="${r}">${t}</label>\n        <input type="text" value="${e}" class="${c}" maxlength="${s}">\n      </div>\n    `}}m.tag="custom-input";const p="wps43E-FCQ2bFp3wiOaz-",b="EMTzP_YwmIKAhxs3WKbJn",v="_2gARZoM_S2Mk_m0BBE-g-M";class g extends HTMLElement{constructor(){super(),this.handleSelectChanged=t=>{const e=t.target;if(!(e instanceof HTMLSelectElement))return;const{value:s}=e.options[e.selectedIndex];this.setAttribute("value",s),this.setAttribute("valid","valid"),this.dispatchEvent(new CustomEvent("state-updated",{bubbles:!0,cancelable:!0}))},this.select=null}static get observedAttributes(){return["list"]}connectedCallback(){this.render(),this.select=this.querySelector(`.${v}`),this.select&&this.select.addEventListener("change",this.handleSelectChanged)}attributeChangedCallback(t,e,s){if("list"===t&&e!==s)try{this.populateOptions(JSON.parse(s)),this.selectDefaultOption()}catch(t){console.log("통신사 정보가 잘못되었습니다.")}}populateOptions(t){if(!this.select)return;const e=document.createDocumentFragment();t.forEach((t=>{const s=document.createElement("option");s.value=t.code,s.innerText=t.description,e.appendChild(s)})),this.select.appendChild(e)}selectDefaultOption(){var t;if(!this.select)return;const e=null===(t=this.select)||void 0===t?void 0:t.options[0];this.select.value=e.value,this.select.dispatchEvent(new CustomEvent("change"))}render(){const t=this.getAttribute("label");this.innerHTML=`\n      <div class="${p}">\n        <label class="${b}">${t}</label>\n        <select class="${v}">\n        </select>\n      </div>\n    `}}g.tag="custom-select";const f="_1FByQTc2-YbTNWcCwbVkjK",y="_3vSZlUGkB67AEMky9EsE7E",A="_2AGcdams3Uhfmr6esg9joc",$="_2MRNIxJNRSFHL0Wo9tCHwn",E="_3j-H_B24pQRfXqKY00sha7",S="jQY48ahWhVI6bECN7hnGT",L="_3Meq49VGRTutuK75ejRATd";class C extends HTMLElement{constructor(){super(...arguments),this.handleClick=t=>{if(t.target instanceof HTMLInputElement){this.handleCheck();const t=this.querySelector(`.${S}`);t&&t.classList.remove(L)}else t.target instanceof HTMLButtonElement&&this.handleAgreeAll(t)},this.handleAgreeAll=t=>{t.preventDefault(),this.querySelectorAll("input").forEach((t=>{t.checked=!0}));const e=this.querySelector(`.${S}`);e&&e.classList.add(L),this.validate()},this.handleCheck=()=>{this.validate()}}static get observedAttributes(){return["list"]}connectedCallback(){this.render(),this.addEventListener("click",this.handleClick)}attributeChangedCallback(t,e,s){if("list"===t&&e!==s)try{this.populateAgreements(JSON.parse(s))}catch(t){console.log("약관 정보가 잘못되었습니다.")}}validate(){const t=Array.from(this.querySelectorAll("input")),e=t.filter((t=>"true"===t.dataset.required)).every((t=>t.checked)),s=t.filter((t=>t.checked)).map((t=>t.value));this.setAttribute("value",JSON.stringify(s)),e?this.setAttribute("valid","valid"):this.removeAttribute("valid"),this.dispatchEvent(new CustomEvent("state-updated",{bubbles:!0,cancelable:!0}))}populateAgreements(t){const e=document.createDocumentFragment();t.forEach((t=>{const s=document.createElement("div");s.classList.add(A);const i=`term__${t.termsId}`;s.innerHTML=`\n        <input\n          id="${i}"\n          type="checkbox"\n          value="${t.termsId}"\n          data-required="${t.required}"\n          class="${$}"\n        ><label for="${i}" class="${E}">${t.title}</label>\n      `,e.appendChild(s)}));const s=this.querySelector(`.${y}`);s&&s.appendChild(e)}render(){this.innerHTML=`\n      <div class="${f}">\n        <div class="${y}">\n        </div>\n        <div class="${A}">\n          <button type="button" class="${S}">전체 동의하기</button>\n        </div>\n      </div>\n    `}}C.tag="terms-box",customElements.define(a.tag,a),customElements.define(m.tag,m),customElements.define(g.tag,g),customElements.define(C.tag,C),document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("root")||document.body,e=document.createElement("app-root");t.appendChild(e)}))})();
//# sourceMappingURL=bundle.a6edb9f8.js.map